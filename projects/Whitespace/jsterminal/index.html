<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="../script/nocontext.js"></script>
    <script src="../bckend/shell.js"></script>
    <script src="../bckend/encode.js"></script>
    <script src="../bckend/sign.js"></script>
    <script src="../script/nocontext.js"></script>

    <script>
        if (encodePass(sessionStorage.getItem("logged")) != localStorage.getItem("/pswd")) {
            document.documentElement.innerHTML = null
            window.top.location.replace("../index.html")
        }
    </script>
    <title>JSTerminal</title>
    <style>
        body {
            background-color: black;
        }

        input.command {
            background-color: #ffffff00;
            border-width: 1px;
            border-color: cyan;
            border-style: solid;
            font-family: monospace;
            color: cyan;
            padding: 5px;
            border-radius: 5px;
        }

        input:focus {
            outline: none;
        }

        button {
            background-color: #ffffff00;
            border-width: 0px;
            border-color: rgb(255, 255, 255);
            border-style: solid;
            font-family: monospace;
            color: rgb(255, 255, 255);
            padding: 5px;
            border-radius: 5px;
            margin-left: 10px;
        }

        div#response {
            font-family: monospace;
            color: white;
            font-size: large;
        }
    </style>

    <script>
        function echo(text) {
            return text;
        }


        function restart() {
            location.reload()
        }

        function disableTerminal() {
            localStorage.removeItem("enablejst")
            update()
        }

        function passChange(pass) {
            newpass = pass
            localStorage.setItem("/pswd", encodePass(newpass))
        }
    </script>
</head>

<body>
    <script>
        if (localStorage.getItem("enablejst") == "1") {
            function command(code) {
                if (code == "exit") {
                    history.back()
                }
                if (code == "system.reset()") {
                    if (confirm("Do you want to reset your system?")) {
                        localStorage.clear()
                        sessionStorage.clear()
                    }
                }
                if (code == "system.preg()") {
                    document.getElementById('response').innerHTML = document.getElementById('response').innerHTML + localStorage.getItem("/pswd") + "<br><br>"
                }
                res = eval(code)
                document.getElementById('response').innerHTML = document.getElementById('response').innerHTML + "> <font style=color:cyan>" + code + "</font><br>" + res + "<br><br>"
            }
        }

        window.onload = function () {
            if (localStorage.getItem("enablejst") != "1") {
                document.body.innerHTML = ""
                alert("Please open settings and enable terminal.")
                history.back()
            }
        }
    </script>

    <div id="response">
        Enter <font style="color:cyan;">exit</font> to close terminal. Enter <font style="color:cyan;">disableTerminal()
        </font> to unroot your system. You can access every script using the terminal.<br>
    </div>
    <br><br>
    <input type="text" class="command" id="commandb"><button
        onclick="command(document.getElementById('commandb').value)">Execute</button>

</body>

</html>