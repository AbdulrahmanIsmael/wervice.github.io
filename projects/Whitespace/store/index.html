<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../styles/base.css">
    <link rel="stylesheet" href="./style/inputs.css">
        <script src="../bckend/encode.js"></script>

    <title>Application Store</title>
    <script>
        if (encodePass(sessionStorage.getItem("logged")) != localStorage.getItem("/pswd")) {
                document.documentElement.innerHTML = null
                window.top.location.replace("../index.html")
            }

        function cancelapp() {
            window.open(history.back(), 'window')
        }

        function fromUrl() {
            url = prompt("Enter URL for app", "https://")
            appname = prompt("Enter name for app")
            favicon = prompt("Enter URL for launcher.")
            if (favicon == null) {
                favicon = "app.png"
            }
            if (confirm("Is this a third-party app?\rI have no control over third-party applications. The third party providers are responsible for their applications. This also applies to their privacy policies and other legal requirements and information.")) {
                localStorage.setItem("wdesk://apps/add", localStorage.getItem("wdesk://apps/add") + "<a href=\"" + url + "\" target=\"_blank\"><img class=\"launcher\" src=\"" + favicon + "\" title=\"" + appname + "\"></a>")
            }
            else {
                localStorage.setItem("wdesk://apps/add", localStorage.getItem("wdesk://apps/add") + "<a href=\"" + url + "\" target=\"window\"><img class=\"launcher\" src=\"" + favicon + "\" title=\"" + appname + "\"></a>")
            }
            if (confirm('Please restart Whitespace now.')) {
                window.top.location.reload(false)
            }
        }

        function install(url, appname, favicon) {
            if (favicon == null) {
                favicon = ""
            }
            localStorage.setItem("wdesk://apps/add", localStorage.getItem("wdesk://apps/add") + "<a href=\"" + url + "\" target=\"window\"><img class=\"launcher\" src=\"" + favicon + "\" title=\"" + appname + "\"></a>")
            if (confirm('Please restart Whitespace now.')) {
                window.top.location.reload(false)
            }
        }

        function RemovefromUrl() {
            isLink = confirm("Do you want to install an Link (= Ok) or an App (= Cancel)")
            appName = prompt("Enter full app name.")
            appUrl = prompt("Enter the app url.")
            favUrl = prompt("Enter favicon url.")
            if (isLink) {
                localStorage.setItem("wdesk://apps/add", localStorage.getItem("wdesk://apps/add").replace("<a href=\"" + appUrl + "\" target=\"_blank\"><img class=\"launcher\" src=\"" + favUrl + "\" title=\"" + appName + "\"></a>", ""))
            }
            else {
                localStorage.setItem("wdesk://apps/add", localStorage.getItem("wdesk://apps/add").replace("<a href=\"" + appUrl + "\" target=\window\"><img class=\"launcher\" src=\"" + favUrl + "\" title=\"" + appName + "\"></a>", ""))
            }
            window.top.location.reload()
        }
    </script>
</head>

<body>
    <div id="top">
        <div class="title"><a href="javascript:cancelapp()" target="window"><button class="close"></button></a> <button
                class="close" style="background: darkgrey;"></button> <button class="close"
                style="background: darkgrey;"></button>&ThickSpace;Software store</div>
    </div>
    <button title="Install from URL" class="icon left" onclick="alert('This does not work anymore.')"><img src="../favicons/web.png"
            alt="Install from URL"></button>
    <button title="Remove URL-App" class="icon left" onclick="RemovefromUrl()"><img src="../favicons/remove.png"
            alt="Remove URL-App"></button>
    <br>
</body>

</html>
